{"version":3,"sources":["event-signal.min.js"],"names":["root","factory","define","amd","exports","module","EventSignal","this","_listeners","prototype","addListener","listenerFn","scope","once","_validate","TypeError","listener","callback","push","emit","data","count","length","listeners","slice","i","call","removeListener","index","_indexOf","splice","removeAllListeners","Array","isArray","listenerCount","then"],"mappings":"CAAC,SAASA,EAAMC,GACQ,kBAAXC,SAAyBA,OAAOC,IACzCD,UAAWD,GACiB,gBAAZG,SAChBC,OAAOD,QAAUH,IAEjBD,EAAKM,YAAcL,KAErBM,KAAM,WACR,YAOA,SAASD,KAEP,MAAMC,gBAAgBD,QAQtBC,KAAKC,eAPI,GAAIF,GAgJf,MApIAA,GAAYG,WASVC,YAAc,SAASC,EAAYC,EAAOC,GACxC,IAAKN,KAAKO,UAAUH,GAClB,KAAM,IAAII,WAAU,qEAGtB,IAAIC,IAAYC,SAAUN,EAa1B,OAXIC,MAAU,GACZI,EAASJ,SACTI,EAASH,KAAOD,IAGhBI,EAASJ,MAAQA,MACjBI,EAASH,KAAOA,GAGlBN,KAAKC,WAAWU,KAAKF,GAEdT,MAQTY,KAAO,SAASC,GACd,GAAIC,GAAQd,KAAKC,WAAWc,MAE5B,IAAID,EAIF,IAAK,GAFDL,GADAO,EAAYhB,KAAKC,WAAWgB,QAGvBC,EAAI,EAAOJ,EAAJI,EAAWA,IACzBT,EAAWO,EAAUE,GACrBT,EAASC,SAASS,KAAKV,EAASJ,MAAOQ,GAEnCJ,EAASH,MACXN,KAAKoB,eAAeX,EAASC,SAKnC,OAAOV,OAQToB,eAAiB,SAAShB,GACxB,GAAIiB,GAAQrB,KAAKsB,SAASlB,EAM1B,OAJIiB,IAAS,GACXrB,KAAKC,WAAWsB,OAAOF,EAAO,GAGzBrB,MAOTwB,mBAAqB,WAKnB,MAJIC,OAAMC,QAAQ1B,KAAKC,cACrBD,KAAKC,WAAWc,OAAS,GAGpBf,MAOTgB,UAAY,WACV,MAAOhB,MAAKC,WAAWgB,SAOzBU,cAAgB,WACd,MAAO3B,MAAKC,WAAWc,QASzBO,SAAW,SAASlB,GAIlB,IAHA,GAAIY,GAAYhB,KAAKC,WACjBiB,EAAIF,EAAUD,OAEZG,KACJ,GAAId,IAAeY,EAAUE,GAAGR,SAC9B,MAAOQ,EAIX,OAAO,IASTX,UAAY,SAASH,GACnB,MAA6B,kBAAfA,IAA6BJ,KAAKsB,SAASlB,GAAc,IAM3EL,EAAYG,UAAU0B,KAAO7B,EAAYG,UAAUC,YAE5CJ","file":"event-signal.min.js","sourcesContent":["(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.EventSignal = factory();\n  }\n}(this, function() {\n'use strict';\n\n\n/**\n * @name EventSignal\n * @constructor\n */\nfunction EventSignal() {\n\n  if (!(this instanceof EventSignal)) {\n    return new EventSignal();\n  }\n\n  /**\n   * @private\n   * @type {Array}\n   */\n  this._listeners = [];\n\n}\n\n\nEventSignal.prototype = {\n\n  /**\n   * @param {Function} listenerFn\n   * @param {Object|boolean} [scope]\n   * @param {boolean} [once]\n   * @returns {EventSignal}\n   * @throws {TypeError}\n   */\n  addListener : function(listenerFn, scope, once) {\n    if (!this._validate(listenerFn)) {\n      throw new TypeError('`listenerFn` must be a function and cannot be added more than once');\n    }\n\n    var listener = {callback: listenerFn};\n\n    if (scope === true) {\n      listener.scope = {};\n      listener.once = scope;\n    }\n    else {\n      listener.scope = scope || {};\n      listener.once = once;\n    }\n\n    this._listeners.push(listener);\n\n    return this;\n  },\n\n\n  /**\n   * @param {*} [data]\n   * @returns {EventSignal}\n   */\n  emit : function(data) {\n    var count = this._listeners.length;\n\n    if (count) {\n      var listeners = this._listeners.slice(),\n          listener;\n\n      for (var i = 0; i < count; i++) {\n        listener = listeners[i];\n        listener.callback.call(listener.scope, data);\n\n        if (listener.once) {\n          this.removeListener(listener.callback);\n        }\n      }\n    }\n\n    return this;\n  },\n\n\n  /**\n   * @param {Function} listenerFn\n   * @returns {EventSignal}\n   */\n  removeListener : function(listenerFn) {\n    var index = this._indexOf(listenerFn);\n\n    if (index >= 0) {\n      this._listeners.splice(index, 1);\n    }\n\n    return this;\n  },\n\n\n  /**\n   * @returns {EventSignal}\n   */\n  removeAllListeners : function() {\n    if (Array.isArray(this._listeners)) {\n      this._listeners.length = 0;\n    }\n\n    return this;\n  },\n\n\n  /**\n   * @returns {Array}\n   */\n  listeners : function() {\n    return this._listeners.slice();\n  },\n\n\n  /**\n   * @returns {number}\n   */\n  listenerCount : function() {\n    return this._listeners.length;\n  },\n\n\n  /**\n   * @private\n   * @param {Function} listenerFn\n   * @returns {number}\n   */\n  _indexOf : function(listenerFn) {\n    var listeners = this._listeners,\n        i = listeners.length;\n\n    while(i--) {\n      if (listenerFn === listeners[i].callback) {\n        return i;\n      }\n    }\n\n    return -1;\n  },\n\n\n  /**\n   * @private\n   * @param {Function} listenerFn\n   * @returns {boolean}\n   */\n  _validate : function(listenerFn) {\n    return typeof listenerFn === 'function' && this._indexOf(listenerFn) < 0;\n  }\n\n};\n\n\nEventSignal.prototype.then = EventSignal.prototype.addListener;\n\nreturn EventSignal;\n}));\n"],"sourceRoot":"/source/"}